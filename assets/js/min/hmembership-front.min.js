/*! htmline-membership 2020-09-07 */

var $=jQuery,hmembershipFront=function(){var e={};$("html").attr("dir")&&$("html").attr("dir");e.init=function(){t()};var t=function(){var e=$(".hmembership-form");e.length&&e.find(".hmembership-form-button").click(function(){$(this).parent().hasClass("active")||r($(this))})},r=function(r){var e=r.closest(".hmembership-form"),t=e.children("#_wpnonce").val(),i=e.children("table").find("tr"),n=c(i),a=e.children(".result"),s="";r.parent().addClass("active"),a.text(""),$.ajax({type:"post",dataType:"json",url:_hmembership_front.ajaxurl,data:{action:"hmembership_form_submission",nonce:t,fields:n},success:function(e,t,r){e.errors.length&&$.each(e.errors,function(e,t){s+=_hmembership_front.strings.error+" #"+t.code+": "+t.description+"<br />"}),e.data.length&&(s+=_hmembership_front.strings.success+" <b><i>"+e.data+"</i></b>")},error:function(e,t,r){s+=_hmembership_front.strings.failed+"<br />"+r},complete:function(e,t){r.parent().removeClass("active"),a.html(s)}})},c=function(e){var u={};return $.each(e,function(e,t){var r=$(t).hasClass("required"),i=$(t).children("th"),n=$(t).children("td"),a=i.children("label").attr("for"),s=i.children("label").text(),c=n.children(),h=c.prop("tagName"),l="",o="";switch(h){case"INPUT":l=c.attr("type"),o=c.val();break;case"TEXTAREA":l="textarea",o=$.trim(c.val());break;case"SELECT":l=void 0!==c.attr("multiple")?"multiselect":"select",o=c.val();break;case"FIELDSET":var m=c.children(),d=m.find("input"),l=m.first().find("input").attr("type"),o={};$.each(d,function(){$(this).prop("checked")&&(o[$(this).val()]=$(this).next().text())});break;default:return!0}u[a]={type:l,label:s,value:o,required:r}}),u};return e}();hmembershipFront.init();