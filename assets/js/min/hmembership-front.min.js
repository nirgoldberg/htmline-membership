/*! htmline-membership 2020-09-11 */

var $=jQuery,hmembershipFront=function(){var e={};$("html").attr("dir")&&$("html").attr("dir");e.init=function(){t()};var t=function(){var e=$(".hmembership-form");e.length&&(r(),e.find(".hmembership-form-button").click(function(){$(this).parent().hasClass("active")||i($(this))}))},r=function(){var e=$(".hmembership-form"),t=e.length?e.find('select[multiple="multiple"]'):"",r=t.length?t.find("option"):"";r.length&&r.mousedown(function(e){return e.preventDefault(),$(this).toggleClass("selected").prop("selected",!$(this).prop("selected")),!1})},i=function(r){var e=r.closest(".hmembership-form"),t=e.children("#_wpnonce").val(),i=e.children("table").find("tr"),n=l(i),a=e.children(".result"),s="";r.parent().addClass("active"),a.text(""),$.ajax({type:"post",dataType:"json",url:_hmembership_front.ajaxurl,data:{action:"hmembership_form_submission",nonce:t,fields:n},success:function(e,t,r){e.errors.length&&$.each(e.errors,function(e,t){s+=_hmembership_front.strings.error+" #"+t.code+": "+t.description+"<br />"}),e.data.length&&(s+=_hmembership_front.strings.success+" <b><i>"+e.data+"</i></b>")},error:function(e,t,r){s+=_hmembership_front.strings.failed+"<br />"+r},complete:function(e,t){r.parent().removeClass("active"),a.html(s)}})},l=function(e){var u={};return $.each(e,function(e,t){var r=$(t).hasClass("required"),i=$(t).children("th"),n=$(t).children("td"),a=i.children("label").attr("for"),s=i.children("label").text(),l=n.children(),c=l.prop("tagName"),h="",o="";switch(c){case"INPUT":h=l.attr("type"),o=l.val();break;case"TEXTAREA":h="textarea",o=$.trim(l.val());break;case"SELECT":h=void 0!==l.attr("multiple")?"multiselect":"select",o=l.val();break;case"FIELDSET":var m=l.children(),p=m.find("input"),h=m.first().find("input").attr("type"),o={};$.each(p,function(){$(this).prop("checked")&&(o[$(this).val()]=$(this).next().text())});break;default:return!0}u[a]={type:h,label:s,value:o,required:r}}),u};return e}();hmembershipFront.init();