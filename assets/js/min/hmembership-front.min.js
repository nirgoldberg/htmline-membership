/*! htmline-membership 2020-08-23 */

var $=jQuery,hmembershipFront=function(){var e={};$("html").attr("dir")&&$("html").attr("dir");e.init=function(){r()};var r=function(){var e=$(".hmembership-form");e.length&&e.find(".hmembership-form-button").click(function(){$(this).parent().hasClass("active")||t($(this))})},t=function(t){var e=t.closest(".hmembership-form"),r=e.children("#_wpnonce").val(),i=e.children("table").find("tr"),n=c(i),a=e.children(".result"),s="";t.parent().addClass("active"),a.text(""),$.ajax({type:"post",dataType:"json",url:_hmembership_front.ajaxurl,data:{action:"hmembership_form_submission",nonce:r,fields:n},success:function(e,r,t){e.errors.length&&$.each(e.errors,function(e,r){s+=_hmembership_front.strings.error+" #"+r.code+": "+r.description+"<br />"}),e.data.length&&(s+=_hmembership_front.strings.success+" <b><i>"+e.data+"</i></b>")},error:function(e,r,t){s+=_hmembership_front.strings.failed+"<br />"+t},complete:function(e,r){t.parent().removeClass("active"),a.html(s)}})},c=function(e){var f={};return $.each(e,function(e,r){var t=$(r).hasClass("required"),i=$(r).children("th"),n=$(r).children("td"),a=i.children("label").attr("for"),s=i.children("label").text(),c=n.children(),h=c.prop("tagName"),l="",o="";switch(h){case"INPUT":l=c.attr("type"),o=c.val();break;case"TEXTAREA":l="textarea",o=$.trim(c.val());break;case"SELECT":l="select",o=c.val();break;case"FIELDSET":var m=c.children(),d=m.find("input"),l=m.first().find("input").attr("type"),o={};$.each(d,function(){$(this).prop("checked")&&(o[$(this).val()]=$(this).next().text())})}f[a]={type:l,label:s,value:o,required:t}}),f};return e}();hmembershipFront.init();