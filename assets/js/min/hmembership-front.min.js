/*! htmline-membership 2020-09-22 */

var $=jQuery,hmembershipFront=function(){var e={};$("html").attr("dir")&&$("html").attr("dir");e.init=function(){t()};var t=function(){var e=$(".hmembership-form");e.length&&(r(),e.find(".hmembership-form-button").click(function(){$(this).parent().hasClass("active")||n($(this))}))},r=function(){var e=$(".hmembership-form"),t=e.length?e.find('select[multiple="multiple"]'):"",r=t.length?t.find("option"):"";r.length&&r.mousedown(function(e){e.preventDefault(),$(this).toggleClass("selected").prop("selected",!$(this).prop("selected"));var t=e.target,r=t.parentNode.scrollTop;return setTimeout(function(){t.parentNode.scrollTo(0,r)},0),!1})},n=function(r){var e=r.closest(".hmembership-form"),t=e.children("#_wpnonce").val(),n=e.children("table").find("tr"),i=l(n),a=e.children(".result"),s="";r.parent().addClass("active"),a.text(""),$.ajax({type:"post",dataType:"json",url:_hmembership_front.ajaxurl,data:{action:"hmembership_form_submission",nonce:t,fields:i},success:function(e,t,r){e.errors.length&&$.each(e.errors,function(e,t){s+=_hmembership_front.strings.error+" #"+t.code+": "+t.description+"<br />"}),e.data.length&&(s+=_hmembership_front.strings.success+" <b><i>"+e.data+"</i></b>")},error:function(e,t,r){s+=_hmembership_front.strings.failed+"<br />"+r},complete:function(e,t){r.parent().removeClass("active"),a.html(s)}})},l=function(e){var u={};return $.each(e,function(e,t){var r=$(t).hasClass("required"),n=$(t).children("th"),i=$(t).children("td"),a=n.children("label").attr("for"),s=n.children("label").text(),l=i.children(),o=l.prop("tagName"),c="",h="";switch(o){case"INPUT":c=l.attr("type"),h=l.val();break;case"TEXTAREA":c="textarea",h=$.trim(l.val());break;case"SELECT":c=void 0!==l.attr("multiple")?"multiselect":"select",h=l.val();break;case"FIELDSET":var m=l.children(),p=m.find("input"),c=m.first().find("input").attr("type"),h={};$.each(p,function(){$(this).prop("checked")&&(h[$(this).val()]=$(this).next().text())});break;default:return!0}u[a]={type:c,label:s,value:h,required:r}}),u};return e}();hmembershipFront.init();