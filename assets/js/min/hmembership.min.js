/*! htmline-membership 2020-08-31 */

var $=jQuery,hmembership=function(){var t={};$("html").attr("dir")&&$("html").attr("dir");t.init=function(){e(),o()};var e=function(){var t=$(".hmembership-admin-box-content-sortable");t.length&&(t.sortable({start:i,stop:n,update:r}).disableSelection(),$(".add-section").click(function(){s($(this))}),t.on("click",".remove-section",function(){p($(this))}))},i=function(t,e){$(e.item).parent().children().find('input[type="radio"]').each(function(){$(this).prop("checked")?$(this).attr("data-checked",!0):$(this).attr("data-checked",!1)})},n=function(t,e){$(e.item).parent().children().find('input[type="radio"]').each(function(){"true"==$(this).attr("data-checked")?$(this).prop("checked",!0):$(this).prop("checked",!1)})},r=function(t,e){$(e.item).parent().children().each(function(t,e){c($(e),t+1)})},s=function(t){var e=t.prev(),i=e.children(),n=$(".hmembership-dynamic-section-template").children().clone(!0);a(n),e.parent().hasClass("no-sections")?e.parent().removeClass("no-sections"):c(n,i.length+1),n.appendTo(e)},a=function(t){t.find('input[type="text"],input[type="password"],input[type="number"],textarea').val(""),t.find("select").children().removeAttr("selected"),t.find('input[type="radio"],input[type="checkbox"]').removeAttr("checked")},c=function(t,e){t.find('input[type="text"],input[type="password"],input[type="number"],textarea,select').each(function(){var t=(t=$(this).attr("id")).substring(0,t.lastIndexOf("_"));$(this).attr("id",t+"_"+e),$(this).closest("tr").find("label").attr("for",t+"_"+e)}),t.find('input[type="radio"],input[type="checkbox"]').each(function(){var t=$(this).attr("id");suffixPos=t.lastIndexOf("_"),suffix=t.substring(suffixPos),prefix=t.substring(0,t.lastIndexOf("_")),prefix=prefix.substring(0,prefix.lastIndexOf("_")),$(this).attr("id",prefix+"_"+e+suffix),$(this).parent("label").attr("for",prefix+"_"+e+suffix),$(this).closest("tr").children("th").children("label").attr("for",prefix+"_"+e)}),t.find('select,input[type="radio"],input[type="checkbox"],input[type="hidden"]').each(function(){var t=$(this).attr("name");suffixPos=t.lastIndexOf("[]"),suffix=t.substring(suffixPos),prefix=t.substring(0,t.lastIndexOf("[")),prefix=prefix.substring(0,prefix.lastIndexOf("[")),$(this).attr("name",prefix+"["+(e-1)+"]"+suffix)})},p=function(t){var e=t.parent(),i=e.parent(),n=i.children();e.remove(),(n=i.children()).each(function(t,e){c($(e),t+1)}),n.length||i.parent().addClass("no-sections")},o=function(){var t=$(".wp-list-table.hmembership-users");t.length&&t.find(".column-user_info").children(".expand").on("click",function(){var t=$(this).children(),e=$(this).next();t.toggleClass("open"),e.toggleClass("open")})};return t}();hmembership.init();